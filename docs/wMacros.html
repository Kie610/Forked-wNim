<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>wMacros</title>
<link rel="stylesheet" type="text/css" href="nimdoc.out.css">

<script type="text/javascript" src="dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  toggleSwitch.addEventListener('change', switchTheme, false);


  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    document.documentElement.setAttribute('data-theme', "dark");
    toggleSwitch.checked = true;
  } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
    document.documentElement.setAttribute('data-theme', "light");
    toggleSwitch.checked = false;
  } else {
    const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;
    if (currentTheme) {
      document.documentElement.setAttribute('data-theme', currentTheme);

      if (currentTheme === 'dark') {
        toggleSwitch.checked = true;
      }
    }
  }
}
</script>

</head>
<body onload="main()">
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">wMacros</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple">
      <li>
        <a href="https://github.com/khchen/wNim">Github Project</a>
      </li>
      <li>
        <a href="wNim.html">Main Page</a>
      </li>
    </ul>
  </div>
  <ul class="simple simple-toc" id="toc-list">

<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#wNilAccess"
    title="wNilAccess = object of Defect"><wbr />w<wbr />Nil<wbr />Access<span class="attachedType"></span></a></li>

  </ul>
</li>

<li>
  <a class="reference reference-toplevel" href="#17" id="67">Macros</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#property.m%2Cuntyped"
    title="property(x: untyped): untyped"><wbr />property<span class="attachedType"></span></a></li>
  <li><a class="reference" href="#validate.m%2Cuntyped"
    title="validate(x: untyped): untyped"><wbr />validate<span class="attachedType"></span></a></li>
  <li><a class="reference" href="#shield.m%2Cuntyped"
    title="shield(x: untyped): untyped"><wbr />shield<span class="attachedType"></span></a></li>
  <li><a class="reference" href="#wClass.m%2Cuntyped%2Cuntyped"
    title="wClass(name: untyped; body: untyped): untyped"><wbr />w<wbr />Class<span class="attachedType"></span></a></li>
  <li><a class="reference" href="#wEventRegister.m%2Cuntyped%2Cuntyped"
    title="wEventRegister(event, list: untyped): untyped"><wbr />w<wbr />Event<wbr />Register<span class="attachedType"></span></a></li>
  
  
  

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#18" id="68">Templates</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#releaseOrDestroy.t%2Ctypedesc%2Ctypedesc%2Cbool"
    title="releaseOrDestroy(T: typedesc; P: typedesc; hasFinal: bool): untyped"><wbr />release<wbr />Or<wbr />Destroy<span class="attachedType"></span></a></li>
  <li><a class="reference" href="#wValidate.t%2Cvarargs%5B%2CwValidateToPointer%5D"
    title="wValidate(vargs: varargs[(pointer, string), wValidateToPointer]): untyped"><wbr />w<wbr />Validate<span class="attachedType"></span></a></li>

  </ul>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc">Some macros used in wNim.</p>
  
<div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<a id="wNilAccess"></a>
<dt><pre><a href="wMacros.html#wNilAccess"><span class="Identifier">wNilAccess</span></a> <span class="Other">=</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <span class="Identifier">Defect</span></pre></dt>


</dl></div>

<div class="section" id="17">
<h1><a class="toc-backref" href="#17">Macros</a></h1>
<dl class="item">
<a id="property.m,untyped"></a>
<dt><pre><span class="Keyword">macro</span> <a href="#property.m%2Cuntyped"><span class="Identifier">property</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>

Add property macro to proc as pragma so that getters/setters can access as nim's style.

</dd>
<a id="validate.m,untyped"></a>
<dt><pre><span class="Keyword">macro</span> <a href="#validate.m%2Cuntyped"><span class="Identifier">validate</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>

Add validate macro to a proc as pragma to ensure <em>self</em> is not nil.

</dd>
<a id="shield.m,untyped"></a>
<dt><pre><span class="Keyword">macro</span> <a href="#shield.m%2Cuntyped"><span class="Identifier">shield</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>

Add export marker to proc but hide it in the document. Used internally.

</dd>
<a id="wClass.m,untyped,untyped"></a>
<dt><pre><span class="Keyword">macro</span> <a href="#wClass.m%2Cuntyped%2Cuntyped"><span class="Identifier">wClass</span></a><span class="Other">(</span><span class="Identifier">name</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">;</span> <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>

<p>A macro for building class following wNim's naming convention. The user can use <em>wClass</em> to subclass the built-in classes in wNim. Constructor is generated from initializer automatically. <em>final()</em> proc is optional. If provided, it will be called when the object being destroyed automatically. In <em>final()</em> proc, it don't need to call final() in superclass.</p>
<p>Example:</p>
<pre class="listing"><span class="Identifier">wClass</span><span class="Punctuation">(</span><span class="Identifier">wMyFrame</span> <span class="Keyword">of</span> <span class="Identifier">wFrame</span><span class="Punctuation">)</span><span class="Punctuation">:</span>
  <span class="Keyword">proc</span> <span class="Identifier">final</span><span class="Punctuation">(</span><span class="Identifier">self</span><span class="Punctuation">:</span> <span class="Identifier">wMyFrame</span><span class="Punctuation">)</span> <span class="Operator">=</span>
    <span class="Identifier">echo</span> <span class="StringLit">&quot;release some resource...&quot;</span>
  
  <span class="Keyword">proc</span> <span class="Identifier">init</span><span class="Punctuation">(</span><span class="Identifier">self</span><span class="Punctuation">:</span> <span class="Identifier">wMyFrame</span><span class="Punctuation">)</span> <span class="Operator">=</span>
    <span class="Identifier">wFrame</span><span class="Punctuation">(</span><span class="Identifier">self</span><span class="Punctuation">)</span><span class="Operator">.</span><span class="Identifier">init</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
  
  <span class="Keyword">proc</span> <span class="Identifier">init</span><span class="Punctuation">(</span><span class="Identifier">self</span><span class="Punctuation">:</span> <span class="Identifier">wMyFrame</span><span class="Punctuation">,</span> <span class="Identifier">title</span><span class="Punctuation">:</span> <span class="Identifier">string</span><span class="Punctuation">)</span> <span class="Operator">=</span>
    <span class="Identifier">wFrame</span><span class="Punctuation">(</span><span class="Identifier">self</span><span class="Punctuation">)</span><span class="Operator">.</span><span class="Identifier">init</span><span class="Punctuation">(</span><span class="Identifier">title</span><span class="Operator">=</span><span class="Identifier">title</span><span class="Punctuation">)</span></pre><p>Output:</p>
<pre class="listing"><span class="Keyword">when</span> <span class="Keyword">not</span> <span class="Identifier">declared</span><span class="Punctuation">(</span><span class="Identifier">wMyFrame</span><span class="Punctuation">)</span><span class="Punctuation">:</span>
  <span class="Keyword">type</span>
    <span class="Identifier">wMyFrame</span> <span class="Operator">=</span> <span class="Keyword">ref</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <span class="Identifier">wFrame</span>

<span class="Keyword">proc</span> <span class="Identifier">init</span><span class="Punctuation">(</span><span class="Identifier">self</span><span class="Punctuation">:</span> <span class="Identifier">wMyFrame</span><span class="Punctuation">)</span> <span class="Operator">=</span>
  <span class="Identifier">wFrame</span><span class="Punctuation">(</span><span class="Identifier">self</span><span class="Punctuation">)</span><span class="Operator">.</span><span class="Identifier">init</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

<span class="Keyword">proc</span> <span class="Identifier">MyFrame</span><span class="Punctuation">(</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">wMyFrame</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">inline</span><span class="Punctuation">,</span> <span class="Identifier">discardable</span><span class="Operator">.</span><span class="Punctuation">}</span> <span class="Operator">=</span>
  <span class="Identifier">new</span><span class="Punctuation">(</span><span class="Identifier">result</span><span class="Punctuation">)</span>
  <span class="Identifier">result</span><span class="Operator">.</span><span class="Identifier">init</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

<span class="Keyword">proc</span> <span class="Identifier">init</span><span class="Punctuation">(</span><span class="Identifier">self</span><span class="Punctuation">:</span> <span class="Identifier">wMyFrame</span><span class="Punctuation">;</span> <span class="Identifier">title</span><span class="Punctuation">:</span> <span class="Identifier">string</span><span class="Punctuation">)</span> <span class="Operator">=</span>
  <span class="Identifier">wFrame</span><span class="Punctuation">(</span><span class="Identifier">self</span><span class="Punctuation">)</span><span class="Operator">.</span><span class="Identifier">init</span><span class="Punctuation">(</span><span class="Identifier">title</span><span class="Operator">=</span><span class="Identifier">title</span><span class="Punctuation">)</span>

<span class="Keyword">proc</span> <span class="Identifier">MyFrame</span><span class="Punctuation">(</span><span class="Identifier">title</span><span class="Punctuation">:</span> <span class="Identifier">string</span><span class="Punctuation">)</span><span class="Punctuation">:</span> <span class="Identifier">wMyFrame</span> <span class="Punctuation">{</span><span class="Operator">.</span><span class="Identifier">inline</span><span class="Punctuation">,</span> <span class="Identifier">discardable</span><span class="Operator">.</span><span class="Punctuation">}</span> <span class="Operator">=</span>
  <span class="Identifier">new</span><span class="Punctuation">(</span><span class="Identifier">result</span><span class="Punctuation">)</span>
  <span class="Identifier">result</span><span class="Operator">.</span><span class="Identifier">init</span><span class="Punctuation">(</span><span class="Identifier">title</span><span class="Punctuation">)</span></pre>

</dd>
<a id="wEventRegister.m,untyped,untyped"></a>
<dt><pre><span class="Keyword">macro</span> <a href="#wEventRegister.m%2Cuntyped%2Cuntyped"><span class="Identifier">wEventRegister</span></a><span class="Other">(</span><span class="Identifier">event</span><span class="Other">,</span> <span class="Identifier">list</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>

A macro to register event message ID so that the Event() constructor can return the corresponding object of the class. The event class must be the subclass of the wEvent. For example:<pre class="listing"><span class="Keyword">type</span> <span class="Identifier">wMyLinkEvent</span> <span class="Operator">=</span> <span class="Keyword">ref</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <span class="Identifier">wCommandEvent</span>

<span class="Identifier">wEventRegister</span><span class="Punctuation">(</span><span class="Identifier">wMyLinkEvent</span><span class="Punctuation">)</span><span class="Punctuation">:</span>
  <span class="Identifier">wEvent_OpenUrl</span>

<span class="Keyword">var</span> <span class="Identifier">e</span> <span class="Operator">=</span> <span class="Identifier">Event</span><span class="Punctuation">(</span><span class="Identifier">msg</span><span class="Operator">=</span><span class="Identifier">wEvent_OpenUrl</span><span class="Punctuation">)</span>
<span class="Identifier">doAssert</span><span class="Punctuation">(</span><span class="Identifier">e</span> <span class="Keyword">of</span> <span class="Identifier">wMyLinkEvent</span><span class="Punctuation">)</span></pre>

</dd>










</dl></div>
<div class="section" id="18">
<h1><a class="toc-backref" href="#18">Templates</a></h1>
<dl class="item">
<a id="releaseOrDestroy.t,typedesc,typedesc,bool"></a>
<dt><pre><span class="Keyword">template</span> <a href="#releaseOrDestroy.t%2Ctypedesc%2Ctypedesc%2Cbool"><span class="Identifier">releaseOrDestroy</span></a><span class="Other">(</span><span class="Identifier">T</span><span class="Other">:</span> <span class="Identifier">typedesc</span><span class="Other">;</span> <span class="Identifier">P</span><span class="Other">:</span> <span class="Identifier">typedesc</span><span class="Other">;</span> <span class="Identifier">hasFinal</span><span class="Other">:</span> <span class="Identifier">bool</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>

Used internally.

</dd>
<a id="wValidate.t,varargs[,wValidateToPointer]"></a>
<dt><pre><span class="Keyword">template</span> <a href="#wValidate.t%2Cvarargs%5B%2CwValidateToPointer%5D"><span class="Identifier">wValidate</span></a><span class="Other">(</span><span class="Identifier">vargs</span><span class="Other">:</span> <span class="Identifier">varargs</span><span class="Other">[</span><span class="Other">(</span><span class="Identifier">pointer</span><span class="Other">,</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">,</span> <span class="Identifier">wValidateToPointer</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">untyped</span></pre></dt>
<dd>

Used internally.

</dd>

</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim.</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
